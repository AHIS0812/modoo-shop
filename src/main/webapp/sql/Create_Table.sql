/* 테이블 생성 */
CREATE TABLE CATEGORY( 
	CATENUM INT PRIMARY KEY,
	CATEL VARCHAR2(50),
	CATEM VARCHAR2(50)
);

CREATE TABLE PRODUCT( 
	PNUM INT PRIMARY KEY,
	CATENUM INT CONSTRAINT PRODUCT_CATEGORY_FK REFERENCES CATEGORY(CATENUM) ON DELETE CASCADE,
	PNAME VARCHAR2(100) NOT NULL,
	FIXPRICE INT DEFAULT 0,
	SELPRICE INT DEFAULT 0,
	RDATE DATE,
	REPERSON VARCHAR2(20),
	REAGE INT,
	BRAND VARCHAR2(50),
	PIMG VARCHAR2(1000) NOT NULL,
	INFOIMG VARCHAR2(1000) NOT NULL,
	PRODUCTCNT INT DEFAULT 50
);


CREATE TABLE MEMBER( 
   MNUM INT PRIMARY KEY,
   MID VARCHAR2(30) NOT NULL, 
   MPW VARCHAR2(30) NOT NULL,  
   MNAME VARCHAR2(30) NOT NULL,
   MEMAIL VARCHAR2(100) CONSTRAINT MEMAIL_UQ UNIQUE,
   MTEL VARCHAR2(100),
   MPOINT INT,
   ZIPCODE VARCHAR2(50),
   USERADDR VARCHAR2(100),
   DETAILADDR VARCHAR2(100),
   MDATE DATE,
   KAKAOLOGIN VARCHAR2(100)
);

CREATE TABLE DIB( 
   	DIBNUM INT PRIMARY KEY,
	PNUM INT CONSTRAINT DIB_PRODUCT_FK REFERENCES PRODUCT(PNUM) ON DELETE CASCADE,
	MNUM INT CONSTRAINT DIB_MEMBER_FK REFERENCES MEMBER(MNUM) ON DELETE CASCADE,
	DCNT INT
);

CREATE TABLE ADDRESS( 
	ANUM INT PRIMARY KEY,
	MNUM INT CONSTRAINT ADDRESS_MEMBER_FK REFERENCES MEMBER(MNUM) ON DELETE CASCADE,
	SHIPNAME VARCHAR2(20),
	DESTINATION VARCHAR2(20),
	ZIPCODE VARCHAR2(50),
	USERADDR VARCHAR2(100),
	DETAILADDR VARCHAR2(100),
	TEL VARCHAR2(20),
	ISDEFAULT VARCHAR2(1) DEFAULT '0' CONSTRAINT ISDEFAULT_BL CHECK(ISDEFAULT IN('0','1'))
);


CREATE TABLE MORDER(
	ONUM INT PRIMARY KEY,
	MNUM INT CONSTRAINT MORDER_MEMBER_FK REFERENCES MEMBER(MNUM) ON DELETE CASCADE,
	OSHIPNAME VARCHAR2(20),
	OZIPCODE VARCHAR2(50),
	OUSERADDR VARCHAR2(100),
	ODETAILADDR VARCHAR2(50),
	OTEL VARCHAR2(20),
	ODATE DATE,
	OSTATUS INT,
	OPOINT INT
);

CREATE TABLE ORDERDETAIL(
	ODNUM INT PRIMARY KEY,			  
	ONUM INT CONSTRAINT ORDERDETAIL_MORDER_FK REFERENCES MORDER(ONUM) ON DELETE CASCADE,
	PNUM INT CONSTRAINT ORDERDETAIL_PRODUCT_FK REFERENCES PRODUCT(PNUM) ON DELETE CASCADE,
	CNT INT
);

/* 시퀀스 생성 */
CREATE SEQUENCE ANUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;
CREATE SEQUENCE DIBNUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;
CREATE SEQUENCE MNUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;
CREATE SEQUENCE PNUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;
CREATE SEQUENCE ONUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;
CREATE SEQUENCE ODNUM_SEQ INCREMENT BY 1 START WITH 1 MINVALUE 1 MAXVALUE 9999 NOCYCLE NOCACHE NOORDER;

/* 관리자 데이터 추가 */
INSERT INTO MEMBER
(MNUM, MID, MPW, MNAME, MEMAIL)
VALUES(-1, 'admin', 'abc123123123', '관리자', 'modoo.shop.3@gmail.com');

DELETE FROM CATEGORY;

/* 카테고리 데이터 추가 */
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(100,'연령별');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(101,'연령별','~4세 이하');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(102,'연령별','미취학 아동');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(103,'연령별','초등학교 저학년');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(104,'연령별','초등학교 고학년');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(105,'연령별','만 12세 이상');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(200,'1인 추천');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(300,'전략');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(400,'두뇌');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(401,'두뇌','퍼즐게임');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(402,'두뇌','창의수학');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(403,'두뇌','코딩게임');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(404,'두뇌','방탈출/추리');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(405,'두뇌','기억력게임');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(500,'파티게임');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(501,'파티게임','복불복');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(600,'카드게임');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(700,'사회/과학');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(800,'언어/정서');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(801,'언어/정서','언어쑥쑥');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(802,'언어/정서','스토리텔링 (감정/대화)');
INSERT INTO CATEGORY (CATENUM,CATEL,CATEM) VALUES(803,'언어/정서','학지사 상담교구');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(900,'악세사리');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(1000,'New');
INSERT INTO CATEGORY (CATENUM,CATEL) VALUES(1100,'Best');

/*테스트 데이터*/
INSERT INTO MEMBER VALUES(1, 'abc','abc','abc','abc','abc', 0, 'abc', 'abc', 'abc', SYSDATE); 
INSERT INTO MEMBER VALUES(2, 'bbb','bbb','bbb','bbb','bbb', 0, 'bbb', 'bbb', 'bbb', SYSDATE); 

INSERT INTO DIB VALUES(1, 1001, 1, 50);
INSERT INTO DIB VALUES(2, 1005, 1, 50);
INSERT INTO DIB VALUES(3, 1001, 2, 50);
INSERT INTO DIB VALUES(4, 1002, 2, 50);

INSERT INTO ADDRESS VALUES(1, 1, 'AA', 'AA', 'AA', 'AA', 'AA', 'AA');
INSERT INTO ADDRESS VALUES(2, 1, 'NN', 'NN', 'NN', 'NN', '', 'MM');
INSERT INTO ADDRESS VALUES(3, 2, 'AA', 'AA', 'AA', 'AA', 'AA', 'AA');
INSERT INTO ADDRESS VALUES(4, 2, 'NN', 'NN', 'NN', 'NN', '', 'MM');

INSERT INTO MORDER VALUES(1,1,'1','1','1','1','1',SYSDATE,1,0);
INSERT INTO MORDER VALUES(2,1,'1','1','1','1','1',SYSDATE,3, 500);
INSERT INTO MORDER VALUES(3,1,'1','1','1','1','1',SYSDATE,4, 2000);
INSERT INTO MORDER VALUES(4,2,'1','1','1','1','1',SYSDATE,1, 100);
INSERT INTO MORDER VALUES(5,2,'1','1','1','1','1',SYSDATE,4, 20);
INSERT INTO MORDER VALUES(6,2,'1','1','1','1','1',SYSDATE,4, 15);

INSERT INTO ORDERDETAIL VALUES(1,1,1001,4);
INSERT INTO ORDERDETAIL VALUES(2,1,1002,3);
INSERT INTO ORDERDETAIL VALUES(3,2,1003,5 );
INSERT INTO ORDERDETAIL VALUES(4,2,1005, 7 );
INSERT INTO ORDERDETAIL VALUES(5,3,1001, 2 );
INSERT INTO ORDERDETAIL VALUES(6,3,1002, 1 );
INSERT INTO ORDERDETAIL VALUES(7,4,1003, 5 );
INSERT INTO ORDERDETAIL VALUES(8,4,1001, 6 );
INSERT INTO ORDERDETAIL VALUES(9,5,1002, 7 );
INSERT INTO ORDERDETAIL VALUES(10,5,1003, 10 );
INSERT INTO ORDERDETAIL VALUES(11,6,1002, 1 );
INSERT INTO ORDERDETAIL VALUES(12,6,1001, 1 );